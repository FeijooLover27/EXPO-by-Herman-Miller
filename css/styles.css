@import url("./zodiak.css");
@import url("./ranade.css");

/* =========================
   SCOPE
   ========================= */
.hm-product{
  --frame-pad: clamp(10px, 1.5vw, 20px);
  --leftbar-w: 240px;
  --content-pl: var(--frame-pad);
  --zodiak: "Zodiak", serif;
  --ranade: "Ranade", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: #fff;
  color: #111;
  will-change: --content-pl;
}

.hm-product.has-leftbar{
  --content-pl: calc(var(--leftbar-w) + var(--frame-pad));
}

.hm-product .container-fluid{
  --bs-gutter-x: 0;
}

/* =========================
   HERO / FRAME
   ========================= */
.hm-product__hero{
  min-height: 100svh;
  padding-top: 0;
}

.hm-product__frame{
  padding: var(--frame-pad);
  min-height: 100svh;
  display: flex;
  flex-direction: column;
}

/* =========================
   CAROUSEL 75vh
   ========================= */
.hm-carousel__viewport{
  height: 75vh;
  background: #fff;
  overflow: hidden;
  position: relative;
  user-select: none;
  touch-action: pan-y;
}

.hm-carousel__track{
  height: 100%;
  display: flex;
  align-items: stretch;
  gap: clamp(12px, 1.4vw, 22px);
  padding: clamp(10px, 1.2vw, 18px);
  will-change: transform;
  cursor: grab;
}

.hm-carousel__track.is-grabbing{
  cursor: grabbing;
}

.hm-carousel__item{
  flex: 0 0 auto;
  height: 100%;
  width: clamp(240px, 28vw, 460px);
  background: #f7f7f7;
  overflow: hidden;
}

.hm-carousel__item img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* =========================
   HEADLINE
   ========================= */
.hm-product__headline{
  margin-top: clamp(14px, 2vw, 22px);
  flex: 0 0 auto;
}

.hm-product__title{
  font-family: var(--zodiak);
  font-weight: 400;
  letter-spacing: -0.02em;
  font-size: clamp(40px, 4.2vw, 64px);
  line-height: 1;
  margin: 0;
}

.hm-product__edition{
  font-family: var(--zodiak);
  font-weight: 400;
  letter-spacing: -0.02em;
  font-size: clamp(28px, 3.2vw, 54px);
  line-height: 1;
}

/* =========================
   BAR (abajo en hero -> sidebar al scrollear)
   ========================= */
.hm-bar{
  --barH: 75px;
  --actionH: 48px;
  margin-top: auto; 
  height: var(--barH);
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  will-change: transform, width, height, top, left;
  gap: 18px;
  z-index: 60;
}

.hm-bar__left{
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.hm-bar__label{
  font-family: var(--ranade);
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  line-height: 1;
  opacity: 0.75;
}

.hm-swatches{
  width: min(50vw, 560px);
  display: flex;
  height: var(--actionH);
  align-items: stretch;
  gap: 0;
}

.hm-swatch{
  flex: 1 1 0;
  height: 100%;
  min-width: 10px;

  border: none;
  outline: none;
  padding: 0;

  transform: none !important;
  transition: flex-grow 220ms ease;
}

.hm-swatch.is-active{
  flex-grow: 7;
}

/* Colores (ajusta a tu paleta real) */
.hm-swatch[data-color-key="rosa"]{ background:#f7b8ca; }
.hm-swatch[data-color-key="verde"]{ background:#6f7a5f; }
.hm-swatch[data-color-key="terracota"]{ background:#d07d64; }
.hm-swatch[data-color-key="azul"]{ background:#0b3a73; }

/* Botón añadir */
.hm-add{
  height: var(--actionH);
  border: none;
  background: #9b1232;
  color: #fff;
  padding: 8px 14px;
  min-width: 170px;

  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  column-gap: 10px;
  row-gap: 2px;
  align-items: center;
  text-align: left;
}

.hm-add__text{
  font-family: var(--ranade);
  font-size: 12px;
  line-height: 1.05;
}

.hm-add__price{
  font-family: var(--ranade);
  font-size: 11px;
  opacity: 0.95;
  grid-column: 1 / 2;
}

.hm-add__plus{
  font-family: var(--ranade);
  font-size: 18px;
  line-height: 1;
  grid-column: 2 / 3;
  grid-row: 1 / 3;
  justify-self: end;
}

/* =========================
   SIDEBAR STATE
   ========================= */
.hm-bar.is-left{
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: var(--leftbar-w);
  margin-top: 0;
  height: auto;
  padding: 18px 16px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: space-between;

  border-left: none;
  z-index: 80;
}

/* En sidebar, el bloque izquierdo usa todo el alto disponible */
.hm-bar.is-left .hm-bar__left{
  height: 100%;
  justify-content: flex-start;
  gap: 14px;
}

/* Sidebar swatches: activo crece en ALTURA */
.hm-bar.is-left .hm-swatches{
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 0;
  align-items: stretch;
}

.hm-bar.is-left .hm-swatch{
  flex: 1 1 0;
  width: 100%;
  min-height: 18px;
  height: auto;
  transition: flex-grow 220ms ease;
}

.hm-bar.is-left .hm-swatch.is-active{
  flex-grow: 7;
}

.hm-bar.is-left .hm-add{
  width: 100%;
  height: auto;
}

/* =========================
   DETAIL: 100vh exacto
   ========================= */
.hm-product__detail{
  height: 100svh;        /* exacto 1 pantalla */
  max-height: 100svh;
  padding: var(--frame-pad);
  display: flex;         /* para que el inner rellene */
  overflow: hidden;      /* evita crecer */
}

.hm-product__detailInner{
  flex: 1;
  display: grid;
  grid-template-rows: auto 1fr; /* texto arriba, imagen ocupa el resto */
  gap: clamp(14px, 2.2vh, 18px);
  padding-left: var(--content-pl);
  padding-right: var(--frame-pad);
  overflow: hidden;      /* lo que se pase, se gestiona dentro */
}

/* Texto: máximo alto; si se pasa, scroll interno */
.hm-detail__copy{
  font-family: var(--ranade);
  font-size: 20px;
  line-height: 1.25;
  max-height: clamp(140px, 22vh, 220px);
  overflow: auto;
  padding-right: 6px; /* para que no corte el scrollbar */
  margin: 0;
}

/* Imagen: rellena el hueco restante */
.hm-detail__figure{
  margin: 0;
  overflow: hidden;
  height: 100%;
}

.hm-detail__figure img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* =========================
   RESPONSIVE
   ========================= */
@media (max-width: 991.98px){
  /* En móvil: no fijes el sidebar */
  .hm-bar.is-left{
    position: static;
    width: auto;
    height: auto;
  }

  .hm-product.has-leftbar{
    --content-pl: var(--frame-pad);
  }

  .hm-bar.is-left .hm-swatches{
    height: auto;
    gap: 10px;
  }

  .hm-bar.is-left .hm-swatch{
    flex: none;
    height: 62px;
    transition: none;
  }

  /* En móvil, texto algo más pequeño */
  .hm-detail__copy{
    font-size: 17px;
    max-height: clamp(120px, 24vh, 200px);
  }
}
